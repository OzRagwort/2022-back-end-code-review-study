# 알린의 블랙잭 미션 최종 리뷰 정리

> # 피드백을 주고받은 PR
> - [[1단계 - 블랙잭] 알린(장원영) 미션 제출합니다. #232](https://github.com/woowacourse/java-blackjack/pull/232)

# 피드백 정리

## 1. 추상 클래스에서만 정의된 메서드의 테스트는 추상 클래스 Test에서 할까? 구현 클래스 Test에서 할까?

- [질문 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r824523940)
- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825315285)

추상 클래스(A)와 구현 클래스(B, C)가 있을 때 A에 `test`라는 메서드가 정의되어있다면 `test`의 테스트는 ATest, BTest, CTest 중 어디서 해야할까?

이 문제는 왜 추상 클래스에 `test`를 정의했는지 생각해봐야한다.

추상 클래스에서 `test`를 정의한 이유는 구현 클래스에서 같은 동작을 할 것이라고 생각했기 때문에 중복 코드를 제거하기 위함이다.

똑같이 생각해보면 구현 클래스 테스트에서 `test`를 매번 테스트하면 이 테스트도 중복 코드가 된다.

그렇기 때문에 추상 클래스 테스트에서 `test`를 테스트하고 구현클래스에서는 `@Override`된 메서드만 테스트를 해보자

## 2. 상수를 꼭 public으로 사용해야 할까?

- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825312702)

A라는 추상 클래스가 있고 B, C 구현 클래스가 있을 때 B, C에서 모두 사용하는 상수를 A에 public으로 정의한 것에 대한 코멘트다.

내가 생각하기에 이 부분에서 생각해봐야할 것은 세 가지정도 있는 것 같다.

1. 꼭 상수로 정의 되어야 할까? -> 아니라면 상수로 만들지 않고 다른 방법을 써보자
2. 꼭 public으로 써야할까? -> private이 가장 좋겠지만 다른 곳에서 사용해야해서 public이어야 한다면 이 상수가 이곳에 있는게 맞는지, 설계가 제대로 된건지, 다른 곳에서 이값을 쓰는게 맞는지
   등을 잘 고려해봐야 할 것 같다.
3. 꼭 A에 있어야 하는 것일까? -> B, C에게는 필요할 수 있지만 나중에 D, E, F 등이 생기면 거기서는 쓰이지 않을 수도 있을 것 같다. A에 있는게 진짜 맞는지 생각해보자

아무리 생각해도 이곳에서 public을 써야한다면 어쩔 수 없이 써야하겠지만 잘 생각해봐야할 것 같다.

지금처럼 하위 클래스에서만 사용한다면 protected로 쓸수도 있을 것 같다.

## 3. 클래스, 메서드의 이름에서 무슨 의미인지 알기 어려운 것 같아요

- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825313978)

무작위로 카드를 뽑는 기능을 만들 때 랜덤으로 뽑기 때문에 테스트가 어렵다고 생각했다.

그래서 카드를 뽑는 기능을 하는 클래스를 인터페이스로 분리해서 고정적으로 카드를 뽑는 클래스를 만들었다.

그런데 이때 이름이 FixDeck이라는 이름이기 때문에 이게 무슨역할을 하는지 알기위해 클래스에 들어가봐야하는 문제가 있다.

FixDeck보다 10 스페이드의 카드만을 반환한다는 것을 더 이해하기 쉽도록 이름을 JustTenSpadeDeck으로 수정할 수도 있을 것 같다.

## 4. 카드를 만들 때 매번 재생성 해야할까요?

- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825314044)

이번 미션에서는 게임을 단 한번 하기 때문에 어차피 한 번만 만들어질 것이라고 생각해서 카드를 캐싱하지 않았다.

하지만 게임이 여러번 실행될 수도 있다고 생각하면 캐싱을 해서 카드를 재사용하는것도 좋을 것 같다!

## 5. Gamer, Player, Dealer라는 클래스명에서 관계를 알기 어려울 것 같다.

- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825314479)

```text
처음에 그냥 클래스 이름만 봤을 때는 Player가 상위 인지, 
Gamer 상위인지 파악하기가 쉽지 않은 것 같아요.

Dealer는 Gamer이긴 하면서 Player는 아닌거라는 내용으로 작성해주신 것 같은데,

Gamer와 Player에 대한 네이밍이 저는 살짝 혼동이 있는 것 같아요.
```

Gamer를 구현한 클래스가 Player와 Dealer였는데 사람에 따라 헷갈릴 수도 있겠다 생각되어서 조금 더 명확하게 이름을 수정해봤다.

특히 Dealer는 Gamer이긴 하면서 Player는 아닌거라는 내용으로 작성해주신 것 같은데,를 보니 이해가 되었다.

조금 더 명확하게 구분할 수 있도록 Player를 인터페이스로 만들고 Player를 상속받는 Dealer와 Participant 구현 클래스를 만들었다.

클래스 명 수정된 점

인터페이스 : Gamer -> Player 추상 클래스 : AbstractGamer -> AbstractPlayer 구현 클래스 : Dealer -> Dealer, Player -> Participant

## 6. Cards는 단순하게 카드만 모아둔 일급 컬렉션인지 Player가 들고있는 카드인지 모호한 것 같다.

- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825314570)

무의식적으로 Card를 모아놨으니 Cards다 라고 만든것 같다.

Cards로 하면 RandomDeck의 `List<Card>`도 Cards라고 볼 수도 있는건가? 와 같이 생각하니 더 이해가 잘 되었다.

조금 더 명확하게 플레이어가 가지고 있는 카드뭉치라는 것을 알려주기 위해 Cards를 PlayerCards로 이름을 수정했다.

## 7. 추상 클래스에서 equals, hashCode, toString 재정의를 했을 때 구현 클래스에서 다시 재정의 해야할까?

- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825315116)
- [코멘트 링크](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825315135)

추상 클래스에서 equals, hashCode를 재정의하고 구현 클래스에 무의식적으로 equals, hashCode를 재정의 했더니 아래 코드처럼 되었다.

```java
class TestClass {
    // ...
    @Override
    public boolean equals(Object o) {
        return super.equals(o);
    }

    @Override
    public int hashCode() {
        return super.hashCode();
    }

    @Override
    public String toString() {
        return super.toString();
    }
}
```

습관적으로 만들다보니 저렇게 된 것 같다. `super`로 상위 킄래스에 재정의된 것을 그대로 쓰기 때문에 없는것과 똑같다.

그래서 삭제해도 상관없을 것 같다.

### 컨벤션, 도메인 미숙지 관련

- [네이밍 컨벤션 수정](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825310047)
- [블랙잭이 되는 조건을 잘못 이해해서 발생한 문제](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825310167)

### 예외 처리 관련

- [null로 Cards를 생성하면 어떻게 되나요?](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825313043)

### 잘못 입력한 경우 재시작안하나요?

- [이름을 잘못 입력한 경우](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825313419)
- [카드를 더 받을 때 y,n을 잘못 입력한 경우](https://github.com/woowacourse/java-blackjack/pull/232#discussion_r825313455)
